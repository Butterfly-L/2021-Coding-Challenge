{"version":3,"sources":["canvasGame-constructor.js"],"names":["Player","constructor","x","y","w","h","c","this","dy","jumpForce","originalHeight","grounded","jumpTimer","cols","rows","spriteSheet","Image","src","spriteWidth","spriteHeight","srcX","srcY","totalFrames","currentFrame","frameDrawn","Animate","keys","Jump","canvas","height","gravity","Draw","ctx","drawImage","Obstacle","t","Update","gameSpeed","beginPath","fillStyle","color","fillRect","fillText","text","closePath","Text","a","s","font","textAlign"],"mappings":"AAAA,MAAMA,OACJC,YAAaC,EAAGC,EAAGC,EAAGC,EAAGC,GACvBC,KAAKL,EAAIA,EACTK,KAAKJ,EAAIA,EACTI,KAAKH,EAAIA,EACTG,KAAKF,EAAIA,EACTE,KAAKD,EAAIA,EAETC,KAAKC,GAAK,EACVD,KAAKE,UAAY,GACjBF,KAAKG,eAAiBL,EACtBE,KAAKI,UAAW,EAChBJ,KAAKK,UAAY,EAGjBL,KAAKM,KAAO,EACZN,KAAKO,KAAO,EACZP,KAAKQ,YAAc,IAAIC,MACvBT,KAAKQ,YAAYE,IAAI,gCACrBV,KAAKW,YAAc,MACnBX,KAAKY,aAAe,IACpBZ,KAAKa,KAAM,EACXb,KAAKc,KAAM,EAGXd,KAAKe,YAAc,EACnBf,KAAKgB,aAAe,EACpBhB,KAAKiB,WAAY,EAGnBC,UAEMC,KAAI,OAAaA,KAAI,KACvBnB,KAAKoB,OAELpB,KAAKK,UAAY,EAIfc,KAAI,WAAiBA,KAAI,KAC3BnB,KAAKF,EAAIE,KAAKG,eAAiB,EAAI,EAEnCH,KAAKF,EAAIE,KAAKG,eAEhBH,KAAKJ,GAAKI,KAAKC,GAGXD,KAAKJ,EAAII,KAAKF,EAAIuB,OAAOC,QAC3BtB,KAAKC,IAAMsB,QACXvB,KAAKI,UAAW,IAEhBJ,KAAKC,GAAK,EACVD,KAAKI,UAAW,EAChBJ,KAAKJ,EAAIyB,OAAOC,OAAStB,KAAKF,GAGhCE,KAAKgB,aAAehB,KAAKgB,aAAehB,KAAKe,YAC7Cf,KAAKa,KAAOb,KAAKgB,aAAehB,KAAKW,YAErCX,KAAKiB,aACFjB,KAAKiB,YAAY,KAClBjB,KAAKgB,eACLhB,KAAKiB,WAAW,GAGlBjB,KAAKwB,OAGPJ,OAEMpB,KAAKI,UAA8B,GAAlBJ,KAAKK,WACxBL,KAAKK,UAAY,EACjBL,KAAKC,IAAMD,KAAKE,WACPF,KAAKK,UAAY,GAAKL,KAAKK,UAAY,KAEhDL,KAAKK,YACLL,KAAKC,IAAOD,KAAKE,UAAaF,KAAKK,UAAY,IAKnDmB,OACEC,IAAIC,UAAU1B,KAAKQ,YAAaR,KAAKa,KAAMb,KAAKc,KAAKd,KAAKW,YAAaX,KAAKY,aAAcZ,KAAKL,EAAGK,KAAKJ,EAAEI,KAAKH,EAAGG,KAAKF,IAG1H,MAAM6B,SACJjC,YAAaC,EAAGC,EAAGC,EAAGC,EAAG8B,GACvB5B,KAAKL,EAAIA,EACTK,KAAKJ,EAAIA,EACTI,KAAKH,EAAIA,EACTG,KAAKF,EAAIA,EACTE,KAAK4B,EAAIA,EAGXC,SACE7B,KAAKL,IAAMmC,UACX9B,KAAKwB,OAGPA,OACEC,IAAIM,YACJN,IAAIO,UAAYhC,KAAK4B,EAAEK,MACvBR,IAAIS,SAASlC,KAAKL,EAAGK,KAAKJ,EAAGI,KAAKH,EAAGG,KAAKF,GAC1C2B,IAAIO,UAAY,UAChBP,IAAIU,SAASnC,KAAK4B,EAAEQ,KAAMpC,KAAKL,EAAI,GAAIK,KAAKJ,EAAG,IAC/C6B,IAAIY,aAIR,MAAMC,KACJ5C,YAAakC,EAAGjC,EAAGC,EAAG2C,EAAGxC,EAAGyC,GACxBxC,KAAK4B,EAAIA,EACT5B,KAAKL,EAAIA,EACTK,KAAKJ,EAAIA,EACTI,KAAKuC,EAAIA,EACTvC,KAAKD,EAAIA,EACTC,KAAKwC,EAAIA,EAGbhB,OACIC,IAAIM,YACJN,IAAIO,UAAYhC,KAAKD,EACrB0B,IAAIgB,KAAOzC,KAAKwC,EAAI,gBACpBf,IAAIiB,UAAY1C,KAAKuC,EACrBd,IAAIU,SAASnC,KAAK4B,EAAG5B,KAAKL,EAAGK,KAAKJ,GAClC6B,IAAIY","file":"canvasGame-constructor.min.js","sourcesContent":["class Player {\n  constructor (x, y, w, h, c) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n    this.c = c;\n    \n    this.dy = 0;\n    this.jumpForce = 15;\n    this.originalHeight = h;\n    this.grounded = false;\n    this.jumpTimer = 0;\n\n    //draw animate\n    this.cols = 5;\n    this.rows = 1;\n    this.spriteSheet = new Image();\n    this.spriteSheet.src=\"../assets/canvasGame/test.png\";  \n    this.spriteWidth = 229.4; \n    this.spriteHeight = 557;\n    this.srcX =0;\n    this.srcY =0;\n\n    //控制主角的動畫速度\n    this.totalFrames = 5;\n    this.currentFrame = 0;\n    this.frameDrawn =0;\n  }\n  \n  Animate () {\n    // 跳\n    if (keys['Space'] || keys['KeyW']) {\n      this.Jump();\n    } else {\n      this.jumpTimer = 0;\n    }\n\n    // 蹲下\n    if (keys['ShiftLeft'] || keys['KeyS']) {\n      this.h = this.originalHeight / 3 * 2;\n    } else {\n      this.h = this.originalHeight;\n    }\n    this.y += this.dy; //跳起來會變高，dy是負的\n\n    // 跳起來後要讓他掉下來的Gravity\n    if (this.y + this.h < canvas.height) {\n      this.dy += gravity; //全域宣告\n      this.grounded = false;\n    } else {\n      this.dy = 0;\n      this.grounded = true;\n      this.y = canvas.height - this.h;\n    }\n\n    this.currentFrame = this.currentFrame % this.totalFrames;\n    this.srcX = this.currentFrame * this.spriteWidth;\n\n    this.frameDrawn++;\n    if(this.frameDrawn>=10){\n      this.currentFrame++;\n      this.frameDrawn=0;\n    }\n\n    this.Draw();\n  }\n\n  Jump () {\n    //在地上的時候\n    if (this.grounded && this.jumpTimer == 0) {\n      this.jumpTimer = 1;\n      this.dy = -this.jumpForce; \n    } else if (this.jumpTimer > 0 && this.jumpTimer < 15) {\n      //按壓越久，jumptimer越大, y的位置越高\n      this.jumpTimer++;\n      this.dy = - this.jumpForce - (this.jumpTimer / 50);\n      //jumptimer除以的係數越小，可以跳越高\n    }\n  }\n  \n  Draw () {\n    ctx.drawImage(this.spriteSheet, this.srcX, this.srcY,this.spriteWidth, this.spriteHeight, this.x, this.y,this.w, this.h);    \n  }\n}\nclass Obstacle {\n  constructor (x, y, w, h, t) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n    this.t = t; //type = 文字和顏色\n  }\n  \n  Update () {\n    this.x += -gameSpeed; //敵人的位置, gamespeed會在start時候宣告\n    this.Draw();\n  }\n\n  Draw () {\n    ctx.beginPath();\n    ctx.fillStyle = this.t.color;\n    ctx.fillRect(this.x, this.y, this.w, this.h);\n    ctx.fillStyle = '#ffffff';\n    ctx.fillText(this.t.text, this.x + 40, this.y+ 20); //寫上文字\n    ctx.closePath();\n  }\n}\n\nclass Text {\n  constructor (t, x, y, a, c, s){\n      this.t = t;\n      this.x = x;\n      this.y = y;\n      this.a = a;\n      this.c = c;\n      this.s = s;    \n    }\n\n  Draw () {\n      ctx.beginPath();\n      ctx.fillStyle = this.c;\n      ctx.font = this.s + \"px sans-serif\";\n      ctx.textAlign = this.a;\n      ctx.fillText(this.t, this.x, this.y);\n      ctx.closePath();\n  }\n}"]}