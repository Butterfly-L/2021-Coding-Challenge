const canvas=document.getElementById("game"),ctx=canvas.getContext("2d");let score,scoreText,highscore,highscoreText,player,gravity,gameSpeed,obstacles=[],keys={},obstacleType=[{text:"加班",color:"#4530ff"},{text:"渣男",color:"#009c27"},{text:"經痛",color:"#ff3e30"}],initialSpawnTimer=200,spawnTimer=initialSpawnTimer;function createCanvas(){canvas.width=648,canvas.height=572,ctx.font="20px sans-serif",player=new Player(25,0,80,180),resetGame(),scoreText=new Text("Score: "+score,25,25,"left","#ffffff","20"),highscoreText=new Text("Highscore: "+highscore,canvas.width-25,25,"right","#ffffff","20"),requestAnimationFrame(Update)}function createObstacle(){let e=RandomIntInRange(40,70),t=RandomIntInRange(0,2),a=RandomIntInRange(0,1),n=new Obstacle(canvas.width+e,canvas.height-e,e,e,obstacleType[t]);1==a&&(n.y-=player.originalHeight-10),obstacles.push(n)}function RandomIntInRange(e,t){return Math.round(Math.random()*(t-e)+e)}function Update(){ctx.clearRect(0,0,canvas.width,canvas.height),spawnTimer--,spawnTimer<=0&&(createObstacle(),spawnTimer=initialSpawnTimer-8*gameSpeed,spawnTimer<60&&(spawnTimer=60));for(let e=0;e<obstacles.length;e++){let t=obstacles[e];t.x+t.w<0&&obstacles.splice(e,1),t.Update(),player.x<t.x+t.w&&player.x+player.w>t.x&&player.y<t.y+t.h&&player.y+player.h>t.y&&resetGame()}setScore(),player.Animate(),gameSpeed+=.003,requestAnimationFrame(Update)}function setScore(){score++,scoreText.t="Score:"+score,scoreText.Draw(),score>highscore&&(highscore=score,highscoreText.t="Highscore: "+highscore),highscoreText.Draw()}function resetGame(){obstacles=[],score=0,highscore=localStorage.getItem("highscore")?localStorage.getItem("highscore"):0,spawnTimer=initialSpawnTimer,gameSpeed=3,gravity=1,window.localStorage.setItem("highscore",highscore)}document.addEventListener("keydown",(function(e){keys[e.code]=!0})),document.addEventListener("keyup",(function(e){keys[e.code]=!1})),createCanvas();
//# sourceMappingURL=canvasGame.min.js.map